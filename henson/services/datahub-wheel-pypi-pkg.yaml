service_name: datahub-wheel-pypi-pkg
description: Python client for datahub metadata ingestion
repo: stripe-private-oss-forks/datahub
contact:
  responsible_team: data-governance
  slack_channel: data-governance-run
deploy:
  clusters:
    - northwest
  autodeploy:
    enabled: true
    triggers:
      merges:
        commits_have_labels: [ "service-datahub-wheel-pypi-pkg" ]
      schedule:
        cron: "20 TUE" # Deploy Tuesdays at 20:00 UTC
kubernetes:
  template: henson/kube/datahub-wheel-pypi-pkg.sky
jenkins:
  job_name: stripe-private-oss-forks-datahub-py
container_images:
  - artifact_name: datahub-py-wheel-image
# TODO: Once we're confident of the stability of the service we should update the announce to cc the relevant runner
# in case of errors during deploys
announce:
  announce_channels:
    - channel: datahub-bots
      # Deployment failed
      enable_deployment_failed: ENABLED
      # Create/clear lock
      enable_create_lock: ENABLED
      enable_clear_lock: ENABLED
      # A deployment healthcheck is unhealthy during an active deploy
      enable_rollout_stage_unhealthy: ENABLED
      # A scheduled autodeploy will go out, did go out, or was unable to go out
      enable_autodeploy_scheduled_deployment: ENABLED
      # Autodeploys are not able to deploy, needs attention
      enable_autodeploy_not_deploying: ENABLED
